{"ast":null,"code":"var concat = require('concat-stream');\nfunction MemoryStorage(opts) {}\nMemoryStorage.prototype._handleFile = function _handleFile(req, file, cb) {\n  file.stream.pipe(concat({\n    encoding: 'buffer'\n  }, function (data) {\n    cb(null, {\n      buffer: data,\n      size: data.length\n    });\n  }));\n};\nMemoryStorage.prototype._removeFile = function _removeFile(req, file, cb) {\n  delete file.buffer;\n  cb(null);\n};\nmodule.exports = function (opts) {\n  return new MemoryStorage(opts);\n};","map":null,"metadata":{},"sourceType":"script"}